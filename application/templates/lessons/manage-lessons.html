{% extends "layout.html" %}

{% block body %}
<h1>Manage lessons</h1>
<table>
  <tr>
    <th>Date</th>
    <th>Start at</th>
    <th>Ends at</th>
    <th>Price</th>
    <th>Skill Level</th>
    <th>Type Of Lesson</th>
  </tr>
  {% for lesson in lessons %}
  <tr>
    <td>{{ lesson.day }}</td>
    <td>{{ lesson.start_time }}</td>
    <td>{{ lesson.end_time }}</td>
    <td>{{ lesson.price }}</td>
    <td>{{ lesson.skill_level }}</td>
    <td>{{ lesson.type_of_lesson }}</td>
    <td>
      <form method="POST" action="{{ url_for('edit_lesson', lesson_id=lesson.id) }}">
        <input type="submit" value="Edit" />
      </form>
    </td>
    <td>
      <form method="POST" action="{{ url_for('delete_lesson', lesson_id=lesson.id) }}">
        <input type="submit" value="Delete" />
      </form>
    </td>
  </tr>
  <tr>
        
    <td>Riders</td>
  </tr>
  {% if lesson.id in lessons_riders %}
  <form method="POST" action="{{ url_for('save_lesson', lesson_id=lesson.id) }}">
         
    {% for rider in lessons_riders[lesson.id] %}

  <tr>
    <td>{{ rider[1] }}</td>
    <td>
    <select name="picked_horse">
        <option value="">Choose a horse</option>
        {% for horse in all_horses %}
        <option value="{{ horse.id }}"> {{ horse.name }} </option>
        {% endfor %}
      </select>
    </td>
  </tr>
    {% endfor %}
    <tr>
      <td>
         <input type="submit" value="Confirm" />
        </form>
      </td>
    </tr>
  {% else %}
  <tr>
    <td>
      <p>No riders. </p>
    </td>
  </tr>
  {% endif %}
  {% endfor %}
</table>

{% endblock %}